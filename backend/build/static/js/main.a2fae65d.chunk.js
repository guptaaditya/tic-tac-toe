(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{51:function(e,t,a){e.exports=a(99)},92:function(e,t){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),i=a.n(c),o=a(15),l=a(5),s=a(6),u=a(7),p=a(8);function d(e){return{type:"JOINED_PLAYER_SUCCESS",data:e.data}}function m(e){return{type:"JOINED_YOUR_SUCCESS",data:e.data}}function v(e,t){return{type:"SEND_MESSAGE",eventName:e,payload:t}}function y(e){var t=e.data;return{type:"UPDATED_BOX",turnPlayer1:t.turnPlayer1,boxes:t.boxes,status:t.status,winner:t.winner}}var h=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.initSocket()}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),f=Object(o.b)(null,(function(e){return{initSocket:function(){return e({type:"INIT_SOCKET"})}}}))(h),b=a(9),E=a(12),O=a.n(E),C={isServerConnected:!1,isOpponentConnected:!1,isPlayer1Me:!1,player1Details:{},player2Details:{},game:{status:"started",boxes:[],playTurnPlayer1:!0,winner:""}};function j(e,t){return O.a.defaults({},{isServerConnected:!0},e)}function N(e,t){var a=t.data,n=a.joined,r=a.player1Details,c=a.player2Details,i=e.isPlayer1Me;"player1"===n&&(i=!0);var o=Boolean(c);return O.a.defaults({},{isOpponentConnected:o,player1Details:r,player2Details:c,isPlayer1Me:i},e)}function k(e,t){var a=t.data,n=a.joined,r=a.player1Details,c=a.player2Details,i=e.isPlayer1Me;return"player1"===n&&(i=!1),O.a.defaults({},{isOpponentConnected:!0,player1Details:r,player2Details:c,isPlayer1Me:i},e)}function S(e,t){var a=t.turnPlayer1,n={boxes:t.boxes,playTurnPlayer1:a,status:t.status,winner:t.winner};return O.a.defaultsDeep({},{game:n},e)}var x,g=Object(b.c)({tictactoe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_SERVER_SUCCESS":return j(e,t);case"JOINED_YOUR_SUCCESS":return N(e,t);case"JOINED_PLAYER_SUCCESS":return k(e,t);case"UPDATED_BOX":return S(e,t);default:return e}}}),P=a(50),w=a(23),D=a(16),_=a.n(D),R=a(49),M=a.n(R),B=a(13),T=_.a.mark(J),A=_.a.mark(Y),U=_.a.mark(W);function I(){try{var e=M.a.connect("http://"+window.location.hostname);return new Promise((function(t){e.on("connect",(function(){t(e)}))}))}catch(t){console.log(t)}}function G(e){return new w.b((function(t){var a={other_player_joined:d,you_joined:m,updated_box:y};return O.a.forEach(a,(function(a,n){e.on(n,(function(e){t(a({msg:n,data:e}))}))})),function(){e.disconnect()}}))}function J(e){var t,a;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(B.a)(G,e);case 2:t=n.sent;case 3:return n.next=6,Object(B.d)(t);case 6:return a=n.sent,n.next=9,Object(B.c)(a);case 9:n.next=3;break;case 11:case"end":return n.stop()}}),T)}function Y(e){var t,a,n;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(B.d)("SEND_MESSAGE");case 3:t=r.sent,a=t.eventName,n=t.payload,e.emit(a,n),r.next=0;break;case 9:case"end":return r.stop()}}),A)}function W(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)(I);case 2:return x=e.sent,e.next=5,Object(B.c)({type:"CONNECT_SERVER_SUCCESS"});case 5:return e.next=7,Object(B.b)(Y,x);case 7:return e.next=9,Object(B.b)(J,x);case 9:case"end":return e.stop()}}),U)}var X,F=[W],L=Object(P.a)(F);var V=a(10),$=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={name:"",isPlayerNameSaved:!1},e.handleNameChange=e.handleNameChange.bind(Object(V.a)(e)),e.handleEnterGame=e.handleEnterGame.bind(Object(V.a)(e)),e}return Object(s.a)(a,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEnterGame",value:function(){var e=this.state.name.trim();e?(this.setState({isPlayerNameSaved:!0,name:e}),this.props.savePlayerName(e)):alert("Please enter your display name")}},{key:"render",value:function(){var e=this.state,t=e.isPlayerNameSaved,a=e.name;return r.a.createElement(r.a.Fragment,null,!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",onChange:this.handleNameChange}),r.a.createElement("button",{onClick:this.handleEnterGame},"Enter the Game")),t&&r.a.createElement("div",null,"Hi ",a,", Please wait for opponent to join"))}}]),a}(r.a.PureComponent),H=Object(o.b)(null,(function(e){return{savePlayerName:function(t){return e(function(e){return v("join_game",{name:e})}(t))}}}))($),K=(a(95),a(96),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(V.a)(e)),e}return Object(s.a)(a,[{key:"handleClick",value:function(){var e=this.props,t=e.position,a=e.onClick,n=e.value,r=e.isDisabled;n||r||a(t)}},{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",{className:"box".concat("X"===e?" bgyellow":""),onClick:this.handleClick},e)}}]),a}(r.a.Component));K.defaultProps={onClick:O.a.noop,value:"",isDisabled:!1};a(97);var q=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleBoxClick=e.handleBoxClick.bind(Object(V.a)(e)),e.handleReplay=e.handleReplay.bind(Object(V.a)(e)),e.box=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return r.a.createElement(K,Object.assign({isDisabled:t,onClick:e},a))}}(e.handleBoxClick),e}return Object(s.a)(a,[{key:"handleReplay",value:function(){this.props.onReplay()}},{key:"handleBoxClick",value:function(e){this.props.clickedAtBoxPosition(e)}},{key:"getStatusText",value:function(){var e=this.props,t=e.game,a=t.status,n=t.playTurnPlayer1,r=t.winner,c=void 0===r?"":r,i=e.player1Name,o=e.player2Name,l=e.isPlayer1Me;switch(a){case"started":var s=o;return n&&(s=l?"Your":i),"Its ".concat(s," turn");case"completed":return c?"Award goes to ".concat("player1"===c?i:o):"It is a Tie. You both played well.";default:return""}}},{key:"render",value:function(){var e=this.box,t=this.props,a=t.game,n=a.status,c=a.boxes,i=t.player1Name,o=t.player2Name,l=t.isPlayer1Me,s=this.getStatusText(),u="completed"===n?"visible":"hidden";return r.a.createElement("div",null,r.a.createElement("div",{className:"player-details"},!l&&r.a.createElement("div",null,"Player 1: ",i," "),r.a.createElement("div",{className:"bgyellow"},l?i:o,", you are Player",l?1:2),l&&r.a.createElement("div",null,"Player 2: ",o," ")),r.a.createElement("div",{className:"status"},s),r.a.createElement("div",{className:"box-lane"},r.a.createElement(e,{position:0,value:c[0]}),r.a.createElement(e,{position:1,value:c[1]}),r.a.createElement(e,{position:2,value:c[2]})),r.a.createElement("div",{className:"box-lane"},r.a.createElement(e,{position:3,value:c[3]}),r.a.createElement(e,{position:4,value:c[4]}),r.a.createElement(e,{position:5,value:c[5]})),r.a.createElement("div",{className:"box-lane"},r.a.createElement(e,{position:6,value:c[6]}),r.a.createElement(e,{position:7,value:c[7]}),r.a.createElement(e,{position:8,value:c[8]})),r.a.createElement("div",{className:"retry ".concat(u),onClick:this.handleReplay},"Want to play again?"))}}]),a}(r.a.Component),z=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isServerConnected,a=e.isOpponentConnected,n=e.game,c=e.handleBoxClick,i=e.isPlayer1Me,o=e.player1Name,l=e.player2Name,s=e.handleReplay;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},!t&&r.a.createElement("div",{className:"loading"},"Connecting server..."),t&&!a&&r.a.createElement(H,null),a&&r.a.createElement(q,{game:n,clickedAtBoxPosition:c,isPlayer1Me:i,player1Name:o,player2Name:l,onReplay:s})))}}]),a}(r.a.Component),Q=Object(o.b)((function(e){return{isServerConnected:e.tictactoe.isServerConnected,isOpponentConnected:e.tictactoe.isOpponentConnected,isPlayer1Me:e.tictactoe.isPlayer1Me,game:e.tictactoe.game,player1Name:e.tictactoe.player1Details.name,player2Name:e.tictactoe.player2Details.name}}),(function(e){return{handleReplay:function(){return e(v("restart_game"))},handleBoxClick:function(t){return e(function(e){return v("clicked_box",{position:e})}(t))}}}))(z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(98);var Z=function(){var e=Object(b.e)(g,Object(b.d)(Object(b.a)(X=Object(w.a)())));return L.map((function(e){return X.run(e)})),e}();window.$store=Z,i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Z},r.a.createElement(f,null,r.a.createElement(Q,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.a2fae65d.chunk.js.map